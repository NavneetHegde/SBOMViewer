@page "/"
@inject SbomState SbomState

<FluentStack Orientation="Orientation.Vertical" Style="gap:1.5rem;">

    @if (SbomState.Document is not null && SbomState.Schema is not null)
    {
        <DynamicSbomViewer RootElement="@SbomState.Document.RootElement"
                           Schema="@SbomState.Schema"
                           FileName="@SbomState.FileName" />
    }
    else
    {
        <FluentCard Style="padding:1rem; text-align:center; color:var(--neutral-foreground-2);">
            No SBOM loaded yet. Please select a format and upload a file.
        </FluentCard>
    }

</FluentStack>

@code {
    protected override void OnInitialized()
    {
        SbomState.OnChange += StateHasChanged;
    }

    public void Dispose()
    {
        SbomState.OnChange -= StateHasChanged;
    }
}
