@page "/"
@inject SbomState SbomState

<FluentStack Orientation="Orientation.Vertical" Style="gap:1.5rem;">

    @if (SbomState.CycloneDXData is not null)
    {
        <CycloneDXViewer Document="@SbomState.CycloneDXData"
                         DocumentFileName="@SbomState.CycloneDXFileName" />
    }

    @if (SbomState.SpdxData is not null)
    {
        <SpdxViewer Document="@SbomState.SpdxData"
                    DocumentFileName="@SbomState.SpdxFileName" />
    }

    @if (SbomState.CycloneDXData is null && SbomState.SpdxData is null)
    {
        <FluentCard Style="padding:1rem; text-align:center; color:var(--neutral-foreground-2);">
            No SBOM loaded yet. Please select a format and upload a file.
        </FluentCard>
    }

</FluentStack>

@code {
    protected override void OnInitialized()
    {
        SbomState.OnChange += StateHasChanged;
    }

    public void Dispose()
    {
        SbomState.OnChange -= StateHasChanged;
    }
}
